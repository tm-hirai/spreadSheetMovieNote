<!DOCTYPE html>
<html>

<head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />

    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.3/css/uikit.min.css" />
    <!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.3/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.3/js/uikit-icons.min.js"></script>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!-- Vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>

    <div uk-container uk-container-expand>
        <!-- search box -->
        <div class="uk-section uk-section-secondary uk-padding-small">
            <div class="uk-container uk-container-expand">
                <h3>Movie Search</h3>

                <form action="http://localhost:3000/search/" method="get">
                    <div uk-grid>
                        <div class="uk-width-4-5">

                            <input class="uk-input" type="text" placeholder="Keyword" id="keyword" name="q">
                            <input style="display: none;" class="uk-input" type="text" placeholder="Keyword"
                                id="keyword" name="p" value="1">

                        </div>
                        <div class="uk-width-1-5">
                            <button class="uk-button uk-button-default uk-width-1-1" type="submit">Search</button>
                        </div>
                    </div>
            </div>
            </form>

        </div>
    </div>

    <ul class="uk-pagination uk-flex-center" uk-margin>

        <!-- 1ページ目じゃなかったら前へボタン追加 -->
        <% if (message.page != 1) { %>
        <li><a href="?q=<%= message.q %>&p=<%= message.page -1 %>"><span uk-pagination-previous></span></a></li>
        <% } %>

        <% for (var i = 0; i < message.total_pages; i++) { %>
        <% if (i+1 == message.page) { %>
        <li class="uk-active"><a href="?q=<%= message.q %>&p=<%= i+1 %>"><%= i+1 %></a></li>
        <% } else { %>
        <li><a href="?q=<%= message.q %>&p=<%= i+1 %>"><%= i+1 %></a></li>
        <% } %>
        <% } %>

        <!-- 最後のページじゃなかったら後へボタン追加 -->
        <% if (message.page != message.total_pages) { %>
        <li><a href="?q=<%= message.q %>&p=<%= message.page +1 %>"><span uk-pagination-next></span></a></li>
        <% } %>

        <!-- <li class="uk-disabled"><span>...</span></li> -->

    </ul>

    <!-- lists -->
    <div class="uk-container">
        <% for (var i = 0; i < message.results.length; i++) { %>
        <div class="uk-card uk-card-default uk-card-hover uk-card-body" id="card" v-for="mlist in mlists">
            <div class="uk-container uk-container-expand">
                <div uk-grid>
                    <div class="uk-width-1-5">
                        <img data-src="https://image.tmdb.org/t/p/w1280<%= message.results[i].poster_path %>"
                            class="uk-margin-auto uk-margin-auto-vertical" width="100" height="150" alt="no-image"
                            uk-img>

                    </div>
                    <div class="uk-width-4-5">
                        <h3><%= message.results[i].title %></h3>
                        <p><%= message.results[i].overview %></p>
                    </div>
                </div>
            </div>
        </div>
        <% } %>
    </div>
    </div>
    <script src="/javascripts/index.js"></script>
</body>

</html>